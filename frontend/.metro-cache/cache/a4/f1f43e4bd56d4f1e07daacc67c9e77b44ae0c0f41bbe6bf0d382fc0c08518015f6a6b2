{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"AuthProvider\",{enumerable:!0,get:function(){return c}}),Object.defineProperty(_e,\"useAuth\",{enumerable:!0,get:function(){return f}});var t=r(d[0]),o=e(r(d[1])),n=e(r(d[2])),s=r(d[3]);const u=\"https://crypto-desk-demo.preview.emergentagent.com\",l=(0,t.createContext)(void 0),c=({children:e})=>{const[c,f]=(0,t.useState)(null),[h,w]=(0,t.useState)(null),[p,y]=(0,t.useState)(!0);(0,t.useEffect)(()=>{v()},[]);const v=async()=>{try{const e=await o.default.getItem('auth_token'),t=await o.default.getItem('user_data');e&&t&&(w(e),f(JSON.parse(t)))}catch(e){console.error('Error loading auth:',e)}finally{y(!1)}};return(0,s.jsx)(l.Provider,{value:{user:c,token:h,loading:p,login:async(e,t)=>{try{return(await n.default.post(`${u}/api/auth/login`,{identifier:e,password:t})).data}catch(e){throw new Error(e.response?.data?.detail||'Login failed')}},verify2FA:async(e,t)=>{try{const s=await n.default.post(`${u}/api/auth/verify-2fa`,{mobile:e,otp:t}),{token:l,user:c}=s.data;w(l),f(c),await o.default.setItem('auth_token',l),await o.default.setItem('user_data',JSON.stringify(c))}catch(e){throw new Error(e.response?.data?.detail||'2FA verification failed')}},register:async(e,t,o,s)=>{try{return(await n.default.post(`${u}/api/auth/register`,{mobile:e,email:t,password:o,referral_code:s})).data}catch(e){throw new Error(e.response?.data?.detail||'Registration failed')}},verifyOTP:async(e,t,s)=>{try{const l=await n.default.post(`${u}/api/auth/verify-otp`,{mobile:e,otp:t,purpose:s}),{token:c,user:h}=l.data;w(c),f(h),await o.default.setItem('auth_token',c),await o.default.setItem('user_data',JSON.stringify(h))}catch(e){throw new Error(e.response?.data?.detail||'OTP verification failed')}},logout:async()=>{f(null),w(null),await o.default.removeItem('auth_token'),await o.default.removeItem('user_data')},refreshUser:async()=>{if(h)try{const e=await n.default.get(`${u}/api/auth/me`,{headers:{Authorization:`Bearer ${h}`}});f(e.data),await o.default.setItem('user_data',JSON.stringify(e.data))}catch(e){console.error('Error refreshing user:',e)}}},children:e})},f=()=>{const e=(0,t.useContext)(l);if(!e)throw new Error('useAuth must be used within AuthProvider');return e}});","lineCount":1,"map":[[1,143,32,0,"Object"],[1,150,32,0,"defineProperty"],[1,165,32,0,"_e"],[1,168,32,0],[1,184,32,0,"enumerable"],[1,196,32,0],[1,198,32,0,"get"],[1,202,32,0],[1,220,32,0,"AuthProvider"],[1,221,32,0],[1,225,148,0,"Object"],[1,232,148,0,"defineProperty"],[1,247,148,0,"_e"],[1,250,148,0],[1,261,148,0,"enumerable"],[1,273,148,0],[1,275,148,0,"get"],[1,279,148,0],[1,297,148,0,"useAuth"],[1,298,148,0],[1,302,1,0],[1,306,1,0,"_react"],[1,308,1,0,"r"],[1,310,1,0,"d"],[1,312,1,0],[1,316,2,0,"AsyncStorage"],[1,318,2,0,"_interopDefault"],[1,320,2,0,"r"],[1,322,2,0,"d"],[1,324,2,0],[1,329,3,0,"axios"],[1,331,3,0,"_interopDefault"],[1,333,3,0,"r"],[1,335,3,0,"d"],[1,337,3,0],[1,342,3,26,"_reactJsxRuntime"],[1,344,3,26,"r"],[1,346,3,26,"d"],[1,348,3,26],[1,352,5,0],[1,358,5,6,"BACKEND_URL"],[1,360,5,17],[1,413,30,6,"AuthContext"],[1,416,30,20],[1,418,30,20,"createContext"],[1,420,30,33,"createContext"],[1,440,30,63,"undefined"],[1,443,32,13,"AuthProvider"],[1,445,32,69,"AuthProvider"],[1,447,32,72,"children"],[1,462,33,2],[1,468,33,9,"user"],[1,470,33,15,"setUser"],[1,474,33,26],[1,476,33,26,"useState"],[1,478,33,34,"useState"],[1,488,33,48],[1,495,34,9,"token"],[1,497,34,16,"setToken"],[1,501,34,28],[1,503,34,28,"useState"],[1,505,34,36,"useState"],[1,515,34,52],[1,522,35,9,"loading"],[1,524,35,18,"setLoading"],[1,528,35,32],[1,530,35,32,"useState"],[1,532,35,40,"useState"],[1,543,35,41],[1,547,37,2],[1,549,37,2,"useEffect"],[1,551,37,11,"useEffect"],[1,562,37,12],[1,567,38,4,"loadStoredAuth"],[1,572,39,5],[1,576,41,2],[1,582,41,8,"loadStoredAuth"],[1,584,41,25,"async"],[1,594,42,4],[1,598,43,6],[1,604,43,12,"storedToken"],[1,612,43,32,"AsyncStorage"],[1,614,43,44,"default"],[1,622,43,45,"getItem"],[1,630,43,53],[1,644,44,12,"storedUser"],[1,652,44,31,"AsyncStorage"],[1,654,44,43,"default"],[1,662,44,44,"getItem"],[1,670,44,52],[1,683,46,10,"storedToken"],[1,686,46,25,"storedUser"],[1,690,47,8,"setToken"],[1,692,47,17,"storedToken"],[1,695,48,8,"setUser"],[1,697,48,16,"JSON"],[1,702,48,21,"parse"],[1,708,48,27,"storedUser"],[1,712,50,4],[1,713,50,6],[1,719,50,13,"error"],[1,722,51,6,"console"],[1,730,51,14,"error"],[1,736,51,20],[1,758,51,43,"error"],[1,760,52,4],[1,761,52,5],[1,769,53,6,"setLoading"],[1,772,53,17],[1,774,54,4],[1,777,141,2],[1,784,142,4],[1,786,142,4,"_reactJsxRuntime"],[1,788,142,4,"jsx"],[1,793,142,5,"AuthContext"],[1,795,142,17,"Provider"],[1,804,142,25],[1,805,142,26,"value"],[1,811,142,33],[1,812,142,35,"user"],[1,819,142,41,"token"],[1,827,142,48,"loading"],[1,837,142,57,"login"],[1,843,90,16,"async"],[1,849,90,23,"identifier"],[1,851,90,43,"password"],[1,856,91,4],[1,860,96,6],[1,873,92,29,"axios"],[1,875,92,34,"default"],[1,883,92,35,"post"],[1,888,92,40],[1,891,92,43,"BACKEND_URL"],[1,910,92,73],[1,911,93,8,"identifier"],[1,924,94,8,"password"],[1,938,96,22,"data"],[1,942,97,4],[1,943,97,6],[1,949,97,13,"error"],[1,952,98,6],[1,958,98,12],[1,962,98,16,"Error"],[1,968,98,22,"error"],[1,970,98,28,"response"],[1,980,98,38,"data"],[1,986,98,44,"detail"],[1,994,98,54],[1,1009,99,4],[1,1012,142,64,"verify2FA"],[1,1022,102,20,"async"],[1,1028,102,27,"mobile"],[1,1030,102,43,"otp"],[1,1035,103,4],[1,1039,104,6],[1,1045,104,12,"response"],[1,1053,104,29,"axios"],[1,1055,104,34,"default"],[1,1063,104,35,"post"],[1,1068,104,40],[1,1071,104,43,"BACKEND_URL"],[1,1095,104,78],[1,1096,105,8,"mobile"],[1,1105,106,8,"otp"],[1,1114,109,14,"token"],[1,1120,109,21,"newToken"],[1,1122,109,31,"user"],[1,1127,109,37,"userData"],[1,1130,109,50,"response"],[1,1132,109,59,"data"],[1,1137,110,6,"setToken"],[1,1139,110,15,"newToken"],[1,1142,111,6,"setUser"],[1,1144,111,14,"userData"],[1,1153,113,12,"AsyncStorage"],[1,1155,113,24,"default"],[1,1163,113,25,"setItem"],[1,1171,113,33],[1,1184,113,47,"newToken"],[1,1193,114,12,"AsyncStorage"],[1,1195,114,24,"default"],[1,1203,114,25,"setItem"],[1,1211,114,33],[1,1223,114,46,"JSON"],[1,1228,114,51,"stringify"],[1,1238,114,61,"userData"],[1,1241,115,4],[1,1242,115,6],[1,1248,115,13,"error"],[1,1251,116,6],[1,1257,116,12],[1,1261,116,16,"Error"],[1,1267,116,22,"error"],[1,1269,116,28,"response"],[1,1279,116,38,"data"],[1,1285,116,44,"detail"],[1,1293,116,54],[1,1319,117,4],[1,1322,142,75,"register"],[1,1331,57,19,"async"],[1,1337,57,26,"mobile"],[1,1339,57,42,"email"],[1,1341,57,57,"password"],[1,1343,57,75,"referralCode"],[1,1348,58,4],[1,1352,65,6],[1,1365,59,29,"axios"],[1,1367,59,34,"default"],[1,1375,59,35,"post"],[1,1380,59,40],[1,1383,59,43,"BACKEND_URL"],[1,1405,59,76],[1,1406,60,8,"mobile"],[1,1415,61,8,"email"],[1,1423,62,8,"password"],[1,1434,63,8,"referral_code"],[1,1448,63,23,"referralCode"],[1,1453,65,22,"data"],[1,1457,66,4],[1,1458,66,6],[1,1464,66,13,"error"],[1,1467,67,6],[1,1473,67,12],[1,1477,67,16,"Error"],[1,1483,67,22,"error"],[1,1485,67,28,"response"],[1,1495,67,38,"data"],[1,1501,67,44,"detail"],[1,1509,67,54],[1,1531,68,4],[1,1534,142,85,"verifyOTP"],[1,1544,71,20,"async"],[1,1550,71,27,"mobile"],[1,1552,71,43,"otp"],[1,1554,71,56,"purpose"],[1,1559,72,4],[1,1563,73,6],[1,1569,73,12,"response"],[1,1577,73,29,"axios"],[1,1579,73,34,"default"],[1,1587,73,35,"post"],[1,1592,73,40],[1,1595,73,43,"BACKEND_URL"],[1,1619,73,78],[1,1620,74,8,"mobile"],[1,1629,75,8,"otp"],[1,1635,76,8,"purpose"],[1,1648,79,14,"token"],[1,1654,79,21,"newToken"],[1,1656,79,31,"user"],[1,1661,79,37,"userData"],[1,1664,79,50,"response"],[1,1666,79,59,"data"],[1,1671,80,6,"setToken"],[1,1673,80,15,"newToken"],[1,1676,81,6,"setUser"],[1,1678,81,14,"userData"],[1,1687,83,12,"AsyncStorage"],[1,1689,83,24,"default"],[1,1697,83,25,"setItem"],[1,1705,83,33],[1,1718,83,47,"newToken"],[1,1727,84,12,"AsyncStorage"],[1,1729,84,24,"default"],[1,1737,84,25,"setItem"],[1,1745,84,33],[1,1757,84,46,"JSON"],[1,1762,84,51,"stringify"],[1,1772,84,61,"userData"],[1,1775,85,4],[1,1776,85,6],[1,1782,85,13,"error"],[1,1785,86,6],[1,1791,86,12],[1,1795,86,16,"Error"],[1,1801,86,22,"error"],[1,1803,86,28,"response"],[1,1813,86,38,"data"],[1,1819,86,44,"detail"],[1,1827,86,54],[1,1853,87,4],[1,1856,142,96,"logout"],[1,1863,120,17,"async"],[1,1873,121,4,"setUser"],[1,1875,121,12],[1,1881,122,4,"setToken"],[1,1883,122,13],[1,1895,123,10,"AsyncStorage"],[1,1897,123,22,"default"],[1,1905,123,23,"removeItem"],[1,1916,123,34],[1,1936,124,10,"AsyncStorage"],[1,1938,124,22,"default"],[1,1946,124,23,"removeItem"],[1,1957,124,34],[1,1971,142,104,"refreshUser"],[1,1983,127,22,"async"],[1,1993,128,4],[1,1996,128,9,"token"],[1,1998,130,4],[1,2002,131,6],[1,2008,131,12,"response"],[1,2016,131,29,"axios"],[1,2018,131,34,"default"],[1,2026,131,35,"get"],[1,2030,131,39],[1,2033,131,42,"BACKEND_URL"],[1,2049,131,69],[1,2050,132,8,"headers"],[1,2058,132,17],[1,2059,132,19,"Authorization"],[1,2073,132,34],[1,2083,132,44,"token"],[1,2090,134,6,"setUser"],[1,2092,134,14,"response"],[1,2094,134,23,"data"],[1,2106,135,12,"AsyncStorage"],[1,2108,135,24,"default"],[1,2116,135,25,"setItem"],[1,2124,135,33],[1,2136,135,46,"JSON"],[1,2141,135,51,"stringify"],[1,2151,135,61,"response"],[1,2153,135,70,"data"],[1,2159,136,4],[1,2160,136,6],[1,2166,136,13,"error"],[1,2169,137,6,"console"],[1,2177,137,14,"error"],[1,2183,137,20],[1,2208,137,46,"error"],[1,2210,138,4],[1,2214,142,118,"children"],[1,2223,143,7,"children"],[1,2228,148,13,"useAuth"],[1,2230,148,23,"useAuth"],[1,2235,149,2],[1,2241,149,8,"context"],[1,2244,149,18],[1,2246,149,18,"useContext"],[1,2248,149,28,"useContext"],[1,2260,149,29,"AuthContext"],[1,2263,150,2],[1,2267,150,7,"context"],[1,2269,151,4],[1,2275,151,10],[1,2279,151,14,"Error"],[1,2285,151,20],[1,2329,153,2],[1,2336,153,9,"context"],[1,2338,154,2],[1,2341]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","register","verifyOTP","login","verify2FA","logout","refreshUser","useAuth"],"mappings":"AAA;qEC+B;YCK;GDE;yBEE;GFc;mBGE;GHY;oBIE;GJiB;gBKE;GLU;oBME;GNgB;iBOE;GPK;sBQE;GRY;CDO;uBUE;CVM"},"hasCjsExports":false},"type":"js/module"}]}