{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":86,"index":86}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":87},"end":{"line":2,"column":69,"index":156}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":157},"end":{"line":3,"column":26,"index":183}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":225},"end":{"line":5,"column":52,"index":277}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"../services/pushNotifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":278},"end":{"line":11,"column":39,"index":447}}],"key":"6td5MWdMBsLZGNw4Rn9RJgT3xXw=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,_d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"AuthProvider\",{enumerable:!0,get:function(){return c}}),Object.defineProperty(_e,\"useAuth\",{enumerable:!0,get:function(){return f}});var t=r(_d[0]),n=e(r(_d[1])),o=e(r(_d[2]));r(_d[3]);var u=(function(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),t.default=e,t})(r(_d[4])),s=(r(_d[5]),r(_d[6]));const d=\"https://bharatbit-preview.preview.emergentagent.com\";u.setNotificationHandler({handleNotification:async()=>({shouldShowAlert:!0,shouldPlaySound:!0,shouldSetBadge:!0})});const l=(0,t.createContext)(void 0),c=({children:e})=>{const[u,c]=(0,t.useState)(null),[f,h]=(0,t.useState)(null),[p,y]=(0,t.useState)(!0),w=(0,t.useRef)(null);(0,t.useEffect)(()=>(v(),()=>{w.current&&w.current()}),[]),(0,t.useEffect)(()=>{(async()=>{0})()},[f]);const v=async()=>{try{const e=await n.default.getItem('auth_token'),t=await n.default.getItem('user_data');e&&t&&(h(e),c(JSON.parse(t)))}catch(e){console.error('Error loading auth:',e)}finally{y(!1)}};return(0,s.jsx)(l.Provider,{value:{user:u,token:f,loading:p,login:async(e,t)=>{try{return(await o.default.post(`${d}/api/auth/login`,{identifier:e,password:t})).data}catch(e){throw new Error(e.response?.data?.detail||'Login failed')}},verify2FA:async(e,t)=>{try{const u=await o.default.post(`${d}/api/auth/verify-2fa`,{mobile:e,otp:t}),{token:s,user:l}=u.data;h(s),c(l),await n.default.setItem('auth_token',s),await n.default.setItem('user_data',JSON.stringify(l))}catch(e){throw new Error(e.response?.data?.detail||'2FA verification failed')}},register:async(e,t,n,u,s,l)=>{try{return(await o.default.post(`${d}/api/auth/register`,{mobile:e,email:t,password:n,referral_code:u,account_type:s||'individual',company_name:l})).data}catch(e){throw new Error(e.response?.data?.detail||'Registration failed')}},verifyOTP:async(e,t,u)=>{try{const s=await o.default.post(`${d}/api/auth/verify-otp`,{mobile:e,otp:t,purpose:u}),{token:l,user:f}=s.data;h(l),c(f),await n.default.setItem('auth_token',l),await n.default.setItem('user_data',JSON.stringify(f))}catch(e){throw new Error(e.response?.data?.detail||'OTP verification failed')}},logout:async()=>{c(null),h(null),await n.default.removeItem('auth_token'),await n.default.removeItem('user_data')},refreshUser:async()=>{if(f)try{const e=await o.default.get(`${d}/api/auth/me`,{headers:{Authorization:`Bearer ${f}`}});c(e.data),await n.default.setItem('user_data',JSON.stringify(e.data))}catch(e){console.error('Error refreshing user:',e)}}},children:e})},f=()=>{const e=(0,t.useContext)(l);if(!e)throw new Error('useAuth must be used within AuthProvider');return e}});","lineCount":1,"map":[[1,144,52,0,"Object"],[1,151,52,0,"defineProperty"],[1,166,52,0,"_e"],[1,169,52,0],[1,185,52,0,"enumerable"],[1,197,52,0],[1,199,52,0,"get"],[1,203,52,0],[1,221,52,0,"AuthProvider"],[1,222,52,0],[1,226,209,0,"Object"],[1,233,209,0,"defineProperty"],[1,248,209,0,"_e"],[1,251,209,0],[1,262,209,0,"enumerable"],[1,274,209,0],[1,276,209,0,"get"],[1,280,209,0],[1,298,209,0,"useAuth"],[1,299,209,0],[1,303,1,0],[1,307,1,0,"_react"],[1,309,1,0,"r"],[1,311,1,0,"_d"],[1,314,1,0],[1,318,2,0,"AsyncStorage"],[1,320,2,0,"_interopDefault"],[1,322,2,0,"r"],[1,324,2,0,"_d"],[1,327,2,0],[1,332,3,0,"axios"],[1,334,3,0,"_interopDefault"],[1,336,3,0,"r"],[1,338,3,0,"_d"],[1,341,3,0],[1,346,3,26,"r"],[1,348,3,26,"_d"],[1,351,3,26],[1,355,5,0],[1,359,5,0,"Notifications"],[1,362],[1,595,5,0,"_interopNamespace"],[1,596,5,0,"r"],[1,598,5,0,"_d"],[1,601,5,0],[1,606,11,39,"_reactJsxRuntime"],[1,609,6,0,"r"],[1,611,6,0,"_d"],[1,614,6,0],[1,618,11,39,"r"],[1,620,11,39,"_d"],[1,623,11,39],[1,628,14,0],[1,634,14,6,"BACKEND_URL"],[1,636,14,17],[1,690,17,0,"Notifications"],[1,692,17,14,"setNotificationHandler"],[1,715,17,37],[1,716,18,2,"handleNotification"],[1,735,18,22,"async"],[1,745,18,22],[1,746,19,4,"shouldShowAlert"],[1,763,19,21],[1,765,20,4,"shouldPlaySound"],[1,782,20,21],[1,784,21,4,"shouldSetBadge"],[1,800,21,20],[1,806,50,0],[1,812,50,6,"AuthContext"],[1,815,50,20],[1,817,50,20,"createContext"],[1,819,50,33,"createContext"],[1,839,50,63,"undefined"],[1,842,52,13,"AuthProvider"],[1,844,52,69,"AuthProvider"],[1,846,52,72,"children"],[1,861,53,2],[1,867,53,9,"user"],[1,869,53,15,"setUser"],[1,873,53,26],[1,875,53,26,"useState"],[1,877,53,34,"useState"],[1,887,53,48],[1,894,54,9,"token"],[1,896,54,16,"setToken"],[1,900,54,28],[1,902,54,28,"useState"],[1,904,54,36,"useState"],[1,914,54,52],[1,921,55,9,"loading"],[1,923,55,18,"setLoading"],[1,927,55,32],[1,929,55,32,"useState"],[1,931,55,40,"useState"],[1,942,55,41],[1,945,56,8,"notificationListenerCleanup"],[1,948,56,38],[1,950,56,38,"useRef"],[1,952,56,44,"useRef"],[1,960,56,66],[1,967,58,2],[1,969,58,2,"useEffect"],[1,971,58,11,"useEffect"],[1,982,58,12],[1,987,59,4,"loadStoredAuth"],[1,991,75,11],[1,996,76,10,"notificationListenerCleanup"],[1,998,76,38,"current"],[1,1007,77,8,"notificationListenerCleanup"],[1,1009,77,36,"current"],[1,1021,80,5],[1,1026,83,2],[1,1028,83,2,"useEffect"],[1,1030,83,11,"useEffect"],[1,1041,83,12],[1,1046,84,35,"async"],[1,1057,85,10,"token"],[1,1060,97,4,"setupPushNotifications"],[1,1064,98,5],[1,1065,98,6,"token"],[1,1069,100,2],[1,1075,100,8,"loadStoredAuth"],[1,1077,100,25,"async"],[1,1087,101,4],[1,1091,102,6],[1,1097,102,12,"storedToken"],[1,1105,102,32,"AsyncStorage"],[1,1107,102,44,"default"],[1,1115,102,45,"getItem"],[1,1123,102,53],[1,1137,103,12,"storedUser"],[1,1145,103,31,"AsyncStorage"],[1,1147,103,43,"default"],[1,1155,103,44,"getItem"],[1,1163,103,52],[1,1176,105,10,"storedToken"],[1,1179,105,25,"storedUser"],[1,1183,106,8,"setToken"],[1,1185,106,17,"storedToken"],[1,1188,107,8,"setUser"],[1,1190,107,16,"JSON"],[1,1195,107,21,"parse"],[1,1201,107,27,"storedUser"],[1,1205,109,4],[1,1206,109,6],[1,1212,109,13,"error"],[1,1215,110,6,"console"],[1,1223,110,14,"error"],[1,1229,110,20],[1,1251,110,43,"error"],[1,1253,111,4],[1,1254,111,5],[1,1262,112,6,"setLoading"],[1,1265,112,17],[1,1267,113,4],[1,1270,202,2],[1,1277,203,4],[1,1279,203,4,"_reactJsxRuntime"],[1,1281,203,4,"jsx"],[1,1286,203,5,"AuthContext"],[1,1288,203,17,"Provider"],[1,1297,203,25],[1,1298,203,26,"value"],[1,1304,203,33],[1,1305,203,35,"user"],[1,1312,203,41,"token"],[1,1320,203,48,"loading"],[1,1330,203,57,"login"],[1,1336,151,16,"async"],[1,1342,151,23,"identifier"],[1,1344,151,43,"password"],[1,1349,152,4],[1,1353,157,6],[1,1366,153,29,"axios"],[1,1368,153,34,"default"],[1,1376,153,35,"post"],[1,1381,153,40],[1,1384,153,43,"BACKEND_URL"],[1,1403,153,73],[1,1404,154,8,"identifier"],[1,1417,155,8,"password"],[1,1431,157,22,"data"],[1,1435,158,4],[1,1436,158,6],[1,1442,158,13,"error"],[1,1445,159,6],[1,1451,159,12],[1,1455,159,16,"Error"],[1,1461,159,22,"error"],[1,1463,159,28,"response"],[1,1473,159,38,"data"],[1,1479,159,44,"detail"],[1,1487,159,54],[1,1502,160,4],[1,1505,203,64,"verify2FA"],[1,1515,163,20,"async"],[1,1521,163,27,"mobile"],[1,1523,163,43,"otp"],[1,1528,164,4],[1,1532,165,6],[1,1538,165,12,"response"],[1,1546,165,29,"axios"],[1,1548,165,34,"default"],[1,1556,165,35,"post"],[1,1561,165,40],[1,1564,165,43,"BACKEND_URL"],[1,1588,165,78],[1,1589,166,8,"mobile"],[1,1598,167,8,"otp"],[1,1607,170,14,"token"],[1,1613,170,21,"newToken"],[1,1615,170,31,"user"],[1,1620,170,37,"userData"],[1,1623,170,50,"response"],[1,1625,170,59,"data"],[1,1630,171,6,"setToken"],[1,1632,171,15,"newToken"],[1,1635,172,6,"setUser"],[1,1637,172,14,"userData"],[1,1646,174,12,"AsyncStorage"],[1,1648,174,24,"default"],[1,1656,174,25,"setItem"],[1,1664,174,33],[1,1677,174,47,"newToken"],[1,1686,175,12,"AsyncStorage"],[1,1688,175,24,"default"],[1,1696,175,25,"setItem"],[1,1704,175,33],[1,1716,175,46,"JSON"],[1,1721,175,51,"stringify"],[1,1731,175,61,"userData"],[1,1734,176,4],[1,1735,176,6],[1,1741,176,13,"error"],[1,1744,177,6],[1,1750,177,12],[1,1754,177,16,"Error"],[1,1760,177,22,"error"],[1,1762,177,28,"response"],[1,1772,177,38,"data"],[1,1778,177,44,"detail"],[1,1786,177,54],[1,1812,178,4],[1,1815,203,75,"register"],[1,1824,116,19,"async"],[1,1830,116,26,"mobile"],[1,1832,116,42,"email"],[1,1834,116,57,"password"],[1,1836,116,75,"referralCode"],[1,1838,116,98,"accountType"],[1,1840,116,120,"companyName"],[1,1845,117,4],[1,1849,126,6],[1,1862,118,29,"axios"],[1,1864,118,34,"default"],[1,1872,118,35,"post"],[1,1877,118,40],[1,1880,118,43,"BACKEND_URL"],[1,1902,118,76],[1,1903,119,8,"mobile"],[1,1912,120,8,"email"],[1,1920,121,8,"password"],[1,1931,122,8,"referral_code"],[1,1945,122,23,"referralCode"],[1,1947,123,8,"account_type"],[1,1960,123,22,"accountType"],[1,1963,123,37],[1,1976,124,8,"company_name"],[1,1989,124,22,"companyName"],[1,1994,126,22,"data"],[1,1998,127,4],[1,1999,127,6],[1,2005,127,13,"error"],[1,2008,128,6],[1,2014,128,12],[1,2018,128,16,"Error"],[1,2024,128,22,"error"],[1,2026,128,28,"response"],[1,2036,128,38,"data"],[1,2042,128,44,"detail"],[1,2050,128,54],[1,2072,129,4],[1,2075,203,85,"verifyOTP"],[1,2085,132,20,"async"],[1,2091,132,27,"mobile"],[1,2093,132,43,"otp"],[1,2095,132,56,"purpose"],[1,2100,133,4],[1,2104,134,6],[1,2110,134,12,"response"],[1,2118,134,29,"axios"],[1,2120,134,34,"default"],[1,2128,134,35,"post"],[1,2133,134,40],[1,2136,134,43,"BACKEND_URL"],[1,2160,134,78],[1,2161,135,8,"mobile"],[1,2170,136,8,"otp"],[1,2176,137,8,"purpose"],[1,2189,140,14,"token"],[1,2195,140,21,"newToken"],[1,2197,140,31,"user"],[1,2202,140,37,"userData"],[1,2205,140,50,"response"],[1,2207,140,59,"data"],[1,2212,141,6,"setToken"],[1,2214,141,15,"newToken"],[1,2217,142,6,"setUser"],[1,2219,142,14,"userData"],[1,2228,144,12,"AsyncStorage"],[1,2230,144,24,"default"],[1,2238,144,25,"setItem"],[1,2246,144,33],[1,2259,144,47,"newToken"],[1,2268,145,12,"AsyncStorage"],[1,2270,145,24,"default"],[1,2278,145,25,"setItem"],[1,2286,145,33],[1,2298,145,46,"JSON"],[1,2303,145,51,"stringify"],[1,2313,145,61,"userData"],[1,2316,146,4],[1,2317,146,6],[1,2323,146,13,"error"],[1,2326,147,6],[1,2332,147,12],[1,2336,147,16,"Error"],[1,2342,147,22,"error"],[1,2344,147,28,"response"],[1,2354,147,38,"data"],[1,2360,147,44,"detail"],[1,2368,147,54],[1,2394,148,4],[1,2397,203,96,"logout"],[1,2404,181,17,"async"],[1,2414,182,4,"setUser"],[1,2416,182,12],[1,2422,183,4,"setToken"],[1,2424,183,13],[1,2436,184,10,"AsyncStorage"],[1,2438,184,22,"default"],[1,2446,184,23,"removeItem"],[1,2457,184,34],[1,2477,185,10,"AsyncStorage"],[1,2479,185,22,"default"],[1,2487,185,23,"removeItem"],[1,2498,185,34],[1,2512,203,104,"refreshUser"],[1,2524,188,22,"async"],[1,2534,189,4],[1,2537,189,9,"token"],[1,2539,191,4],[1,2543,192,6],[1,2549,192,12,"response"],[1,2557,192,29,"axios"],[1,2559,192,34,"default"],[1,2567,192,35,"get"],[1,2571,192,39],[1,2574,192,42,"BACKEND_URL"],[1,2590,192,69],[1,2591,193,8,"headers"],[1,2599,193,17],[1,2600,193,19,"Authorization"],[1,2614,193,34],[1,2624,193,44,"token"],[1,2631,195,6,"setUser"],[1,2633,195,14,"response"],[1,2635,195,23,"data"],[1,2647,196,12,"AsyncStorage"],[1,2649,196,24,"default"],[1,2657,196,25,"setItem"],[1,2665,196,33],[1,2677,196,46,"JSON"],[1,2682,196,51,"stringify"],[1,2692,196,61,"response"],[1,2694,196,70,"data"],[1,2700,197,4],[1,2701,197,6],[1,2707,197,13,"error"],[1,2710,198,6,"console"],[1,2718,198,14,"error"],[1,2724,198,20],[1,2749,198,46,"error"],[1,2751,199,4],[1,2755,203,118,"children"],[1,2764,204,7,"children"],[1,2769,209,13,"useAuth"],[1,2771,209,23,"useAuth"],[1,2776,210,2],[1,2782,210,8,"context"],[1,2785,210,18],[1,2787,210,18,"useContext"],[1,2789,210,28,"useContext"],[1,2801,210,29,"AuthContext"],[1,2804,211,2],[1,2808,211,7,"context"],[1,2810,212,4],[1,2816,212,10],[1,2820,212,14,"Error"],[1,2826,212,20],[1,2870,214,2],[1,2877,214,9,"context"],[1,2879,215,2],[1,2882]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","AuthProvider","useEffect$argument_0","addNotificationListeners$argument_0","addNotificationListeners$argument_1","<anonymous>","setupPushNotifications","loadStoredAuth","register","verifyOTP","login","verify2FA","logout","refreshUser","useAuth"],"mappings":"AAA;sBCiB;IDI;qEE8B;YCM;QCM;SDE;QEC;SFI;WGI;KHI;GDC;YCG;mCIC;KJW;GDG;yBME;GNc;mBOE;GPc;oBQE;GRiB;gBSE;GTU;oBUE;GVgB;iBWE;GXK;sBYE;GZY;CFO;uBeE;CfM"},"hasCjsExports":false},"type":"js/module"}]}