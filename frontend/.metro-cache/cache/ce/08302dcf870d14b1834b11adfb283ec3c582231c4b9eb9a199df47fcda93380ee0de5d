{"dependencies":[{"name":"./constants","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":16,"index":31},"end":{"line":3,"column":38,"index":53}}],"key":"3z43bJyk/UB4EKjDCOXTFak09do=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";let t=r(d[0]);m.exports=function(n,o,l,O){let p=-1!==[t.COLORTYPE_COLOR_ALPHA,t.COLORTYPE_ALPHA].indexOf(O.colorType);if(O.colorType===O.inputColorType){let t=(function(){let t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),256!==new Int16Array(t)[0]})();if(8===O.bitDepth||16===O.bitDepth&&t)return n}let u=16!==O.bitDepth?n:new Uint16Array(n.buffer),h=255,L=t.COLORTYPE_TO_BPP_MAP[O.inputColorType];4!==L||O.inputHasAlpha||(L=3);let c=t.COLORTYPE_TO_BPP_MAP[O.colorType];16===O.bitDepth&&(h=65535,c*=2);let C=Buffer.alloc(o*l*c),P=0,T=0,A=O.bgColor||{};function E(){let n,o,l,L=h;switch(O.inputColorType){case t.COLORTYPE_COLOR_ALPHA:L=u[P+3],n=u[P],o=u[P+1],l=u[P+2];break;case t.COLORTYPE_COLOR:n=u[P],o=u[P+1],l=u[P+2];break;case t.COLORTYPE_ALPHA:L=u[P+1],n=u[P],o=n,l=n;break;case t.COLORTYPE_GRAYSCALE:n=u[P],o=n,l=n;break;default:throw new Error(\"input color type:\"+O.inputColorType+\" is not supported at present\")}return O.inputHasAlpha&&(p||(L/=h,n=Math.min(Math.max(Math.round((1-L)*A.red+L*n),0),h),o=Math.min(Math.max(Math.round((1-L)*A.green+L*o),0),h),l=Math.min(Math.max(Math.round((1-L)*A.blue+L*l),0),h))),{red:n,green:o,blue:l,alpha:L}}void 0===A.red&&(A.red=h),void 0===A.green&&(A.green=h),void 0===A.blue&&(A.blue=h);for(let n=0;n<l;n++)for(let n=0;n<o;n++){let n=E();switch(O.colorType){case t.COLORTYPE_COLOR_ALPHA:case t.COLORTYPE_COLOR:8===O.bitDepth?(C[T]=n.red,C[T+1]=n.green,C[T+2]=n.blue,p&&(C[T+3]=n.alpha)):(C.writeUInt16BE(n.red,T),C.writeUInt16BE(n.green,T+2),C.writeUInt16BE(n.blue,T+4),p&&C.writeUInt16BE(n.alpha,T+6));break;case t.COLORTYPE_ALPHA:case t.COLORTYPE_GRAYSCALE:{let t=(n.red+n.green+n.blue)/3;8===O.bitDepth?(C[T]=t,p&&(C[T+1]=n.alpha)):(C.writeUInt16BE(t,T),p&&C.writeUInt16BE(n.alpha,T+2));break}default:throw new Error(\"unrecognised color Type \"+O.colorType)}P+=L,T+=c}return C}});","lineCount":1,"map":[[1,28,1,0],[1,41,3,0],[1,45,3,4,"constants"],[1,47,3,16,"require"],[1,49,3,23,"d"],[1,51,3,23],[1,55,5,0,"module"],[1,57,5,7,"exports"],[1,65,5,17],[1,74,5,27,"dataIn"],[1,76,5,35,"width"],[1,78,5,42,"height"],[1,80,5,50,"options"],[1,83,6,2],[1,87,6,6,"outHasAlpha"],[1,90,9,5],[1,94,7,4],[1,95,7,5,"constants"],[1,97,7,15,"COLORTYPE_COLOR_ALPHA"],[1,119,7,38,"constants"],[1,121,7,48,"COLORTYPE_ALPHA"],[1,138,7,65,"indexOf"],[1,146,8,6,"options"],[1,148,8,14,"colorType"],[1,159,10,2],[1,162,10,6,"options"],[1,164,10,14,"colorType"],[1,176,10,28,"options"],[1,178,10,36,"inputColorType"],[1,193,10,52],[1,194,11,4],[1,198,11,8,"bigEndian"],[1,201,11,21],[1,212,12,6],[1,216,12,10,"buffer"],[1,218,12,19],[1,222,12,23,"ArrayBuffer"],[1,234,12,35],[1,237,15,6],[1,244,13,6],[1,248,13,10,"DataView"],[1,257,13,19,"buffer"],[1,260,13,27,"setInt16"],[1,269,13,36],[1,271,13,39],[1,276,13,44],[1,279,15,43],[1,285,15,13],[1,289,15,17,"Int16Array"],[1,300,15,28,"buffer"],[1,303,15,36],[1,305,16,4],[1,307,11,21],[1,310,18,4],[1,313,18,29],[1,317,18,8,"options"],[1,319,18,16,"bitDepth"],[1,329,18,56],[1,334,18,35,"options"],[1,336,18,43,"bitDepth"],[1,346,18,62,"bigEndian"],[1,348,19,6],[1,355,19,13,"dataIn"],[1,356,21,2],[1,357,24,2],[1,361,24,6,"data"],[1,363,24,34],[1,368,24,13,"options"],[1,370,24,21,"bitDepth"],[1,379,24,39,"dataIn"],[1,381,24,48],[1,385,24,52,"Uint16Array"],[1,397,24,64,"dataIn"],[1,399,24,71,"buffer"],[1,407,26,6,"maxValue"],[1,409,26,17],[1,413,27,6,"inBpp"],[1,415,27,14,"constants"],[1,417,27,24,"COLORTYPE_TO_BPP_MAP"],[1,438,27,45,"options"],[1,440,27,53,"inputColorType"],[1,456,28,16],[1,460,28,6,"inBpp"],[1,463,28,22,"options"],[1,465,28,30,"inputHasAlpha"],[1,481,29,4,"inBpp"],[1,483,29,12],[1,486,31,2],[1,490,31,6,"outBpp"],[1,492,31,15,"constants"],[1,494,31,25,"COLORTYPE_TO_BPP_MAP"],[1,515,31,46,"options"],[1,517,31,54,"colorType"],[1,528,32,27],[1,533,32,6,"options"],[1,535,32,14,"bitDepth"],[1,546,33,4,"maxValue"],[1,548,33,15],[1,554,34,4,"outBpp"],[1,557,34,14],[1,560,36,2],[1,564,36,6,"outData"],[1,566,36,16,"Buffer"],[1,573,36,23,"alloc"],[1,579,36,29,"width"],[1,581,36,37,"height"],[1,583,36,46,"outBpp"],[1,586,38,6,"inIndex"],[1,588,38,16],[1,590,39,6,"outIndex"],[1,592,39,17],[1,594,41,6,"bgColor"],[1,596,41,16,"options"],[1,598,41,24,"bgColor"],[1,607,41,35],[1,608,41,36],[1,610,52,2],[1,619,52,11,"getRGBA"],[1,623,53,4],[1,627,53,8,"red"],[1,629,54,8,"green"],[1,631,55,8,"blue"],[1,633,56,8,"alpha"],[1,635,56,16,"maxValue"],[1,637,57,4],[1,644,57,12,"options"],[1,646,57,20,"inputColorType"],[1,662,58,6],[1,667,58,11,"constants"],[1,669,58,21,"COLORTYPE_COLOR_ALPHA"],[1,691,59,8,"alpha"],[1,693,59,16,"data"],[1,695,59,21,"inIndex"],[1,697,59,31],[1,700,60,8,"red"],[1,702,60,14,"data"],[1,704,60,19,"inIndex"],[1,707,61,8,"green"],[1,709,61,16,"data"],[1,711,61,21,"inIndex"],[1,713,61,31],[1,716,62,8,"blue"],[1,718,62,15,"data"],[1,720,62,20,"inIndex"],[1,722,62,30],[1,725,63,8],[1,731,64,6],[1,736,64,11,"constants"],[1,738,64,21,"COLORTYPE_COLOR"],[1,754,65,8,"red"],[1,756,65,14,"data"],[1,758,65,19,"inIndex"],[1,761,66,8,"green"],[1,763,66,16,"data"],[1,765,66,21,"inIndex"],[1,767,66,31],[1,770,67,8,"blue"],[1,772,67,15,"data"],[1,774,67,20,"inIndex"],[1,776,67,30],[1,779,68,8],[1,785,69,6],[1,790,69,11,"constants"],[1,792,69,21,"COLORTYPE_ALPHA"],[1,808,70,8,"alpha"],[1,810,70,16,"data"],[1,812,70,21,"inIndex"],[1,814,70,31],[1,817,71,8,"red"],[1,819,71,14,"data"],[1,821,71,19,"inIndex"],[1,824,72,8,"green"],[1,826,72,16,"red"],[1,828,73,8,"blue"],[1,830,73,15,"red"],[1,832,74,8],[1,838,75,6],[1,843,75,11,"constants"],[1,845,75,21,"COLORTYPE_GRAYSCALE"],[1,865,76,8,"red"],[1,867,76,14,"data"],[1,869,76,19,"inIndex"],[1,872,77,8,"green"],[1,874,77,16,"red"],[1,876,78,8,"blue"],[1,878,78,15,"red"],[1,880,79,8],[1,886,80,6],[1,894,81,8],[1,900,81,14],[1,904,81,18,"Error"],[1,910,82,10],[1,930,83,12,"options"],[1,932,83,20,"inputColorType"],[1,947,84,12],[1,979,105,4],[1,986,88,8,"options"],[1,988,88,16,"inputHasAlpha"],[1,1004,89,11,"outHasAlpha"],[1,1008,90,8,"alpha"],[1,1011,90,17,"maxValue"],[1,1013,91,8,"red"],[1,1015,91,14,"Math"],[1,1020,91,19,"min"],[1,1024,92,10,"Math"],[1,1029,92,15,"max"],[1,1033,92,19,"Math"],[1,1038,92,24,"round"],[1,1045,92,31],[1,1047,92,35,"alpha"],[1,1050,92,44,"bgColor"],[1,1052,92,52,"red"],[1,1056,92,58,"alpha"],[1,1058,92,66,"red"],[1,1061,92,72],[1,1064,93,10,"maxValue"],[1,1067,95,8,"green"],[1,1069,95,16,"Math"],[1,1074,95,21,"min"],[1,1078,96,10,"Math"],[1,1083,96,15,"max"],[1,1087,96,19,"Math"],[1,1092,96,24,"round"],[1,1099,96,31],[1,1101,96,35,"alpha"],[1,1104,96,44,"bgColor"],[1,1106,96,52,"green"],[1,1112,96,60,"alpha"],[1,1114,96,68,"green"],[1,1117,96,76],[1,1120,97,10,"maxValue"],[1,1123,99,8,"blue"],[1,1125,99,15,"Math"],[1,1130,99,20,"min"],[1,1134,100,10,"Math"],[1,1139,100,15,"max"],[1,1143,100,19,"Math"],[1,1148,100,24,"round"],[1,1155,100,31],[1,1157,100,35,"alpha"],[1,1160,100,44,"bgColor"],[1,1162,100,52,"blue"],[1,1167,100,59,"alpha"],[1,1169,100,67,"blue"],[1,1172,100,74],[1,1175,101,10,"maxValue"],[1,1180,105,11],[1,1181,105,13,"red"],[1,1185,105,18,"red"],[1,1187,105,23,"green"],[1,1193,105,30,"green"],[1,1195,105,37,"blue"],[1,1200,105,43,"blue"],[1,1202,105,49,"alpha"],[1,1208,105,56,"alpha"],[1,1210,106,2],[1,1216,42,22,"undefined"],[1,1220,42,6,"bgColor"],[1,1222,42,14,"red"],[1,1228,43,4,"bgColor"],[1,1230,43,12,"red"],[1,1234,43,18,"maxValue"],[1,1242,45,24,"undefined"],[1,1246,45,6,"bgColor"],[1,1248,45,14,"green"],[1,1256,46,4,"bgColor"],[1,1258,46,12,"green"],[1,1264,46,20,"maxValue"],[1,1272,48,23,"undefined"],[1,1276,48,6,"bgColor"],[1,1278,48,14,"blue"],[1,1285,49,4,"bgColor"],[1,1287,49,12,"blue"],[1,1292,49,19,"maxValue"],[1,1295,108,2],[1,1299,108,7],[1,1303,108,11,"y"],[1,1305,108,15],[1,1307,108,18,"y"],[1,1309,108,22,"height"],[1,1311,108,30,"y"],[1,1315,109,4],[1,1319,109,9],[1,1323,109,13,"x"],[1,1325,109,17],[1,1327,109,20,"x"],[1,1329,109,24,"width"],[1,1331,109,31,"x"],[1,1335,109,36],[1,1336,110,6],[1,1340,110,10,"rgba"],[1,1342,110,17,"getRGBA"],[1,1346,112,6],[1,1353,112,14,"options"],[1,1355,112,22,"colorType"],[1,1366,113,8],[1,1371,113,13,"constants"],[1,1373,113,23,"COLORTYPE_COLOR_ALPHA"],[1,1395,114,8],[1,1400,114,13,"constants"],[1,1402,114,23,"COLORTYPE_COLOR"],[1,1418,115,35],[1,1422,115,14,"options"],[1,1424,115,22,"bitDepth"],[1,1434,116,12,"outData"],[1,1436,116,20,"outIndex"],[1,1439,116,32,"rgba"],[1,1441,116,37,"red"],[1,1445,117,12,"outData"],[1,1447,117,20,"outIndex"],[1,1449,117,31],[1,1452,117,36,"rgba"],[1,1454,117,41,"green"],[1,1460,118,12,"outData"],[1,1462,118,20,"outIndex"],[1,1464,118,31],[1,1467,118,36,"rgba"],[1,1469,118,41,"blue"],[1,1474,119,16,"outHasAlpha"],[1,1478,120,14,"outData"],[1,1480,120,22,"outIndex"],[1,1482,120,33],[1,1485,120,38,"rgba"],[1,1487,120,43,"alpha"],[1,1496,123,12,"outData"],[1,1498,123,20,"writeUInt16BE"],[1,1512,123,34,"rgba"],[1,1514,123,39,"red"],[1,1518,123,44,"outIndex"],[1,1521,124,12,"outData"],[1,1523,124,20,"writeUInt16BE"],[1,1537,124,34,"rgba"],[1,1539,124,39,"green"],[1,1545,124,46,"outIndex"],[1,1547,124,57],[1,1550,125,12,"outData"],[1,1552,125,20,"writeUInt16BE"],[1,1566,125,34,"rgba"],[1,1568,125,39,"blue"],[1,1573,125,45,"outIndex"],[1,1575,125,56],[1,1578,126,16,"outHasAlpha"],[1,1581,127,14,"outData"],[1,1583,127,22,"writeUInt16BE"],[1,1597,127,36,"rgba"],[1,1599,127,41,"alpha"],[1,1605,127,48,"outIndex"],[1,1607,127,59],[1,1611,130,10],[1,1617,131,8],[1,1622,131,13,"constants"],[1,1624,131,23,"COLORTYPE_ALPHA"],[1,1640,132,8],[1,1645,132,13,"constants"],[1,1647,132,23,"COLORTYPE_GRAYSCALE"],[1,1667,132,44],[1,1668,134,10],[1,1672,134,14,"grayscale"],[1,1675,134,27,"rgba"],[1,1677,134,32,"red"],[1,1681,134,38,"rgba"],[1,1683,134,43,"green"],[1,1689,134,51,"rgba"],[1,1691,134,56,"blue"],[1,1697,134,64],[1,1699,135,35],[1,1703,135,14,"options"],[1,1705,135,22,"bitDepth"],[1,1715,136,12,"outData"],[1,1717,136,20,"outIndex"],[1,1720,136,32,"grayscale"],[1,1722,137,16,"outHasAlpha"],[1,1726,138,14,"outData"],[1,1728,138,22,"outIndex"],[1,1730,138,33],[1,1733,138,38,"rgba"],[1,1735,138,43,"alpha"],[1,1744,141,12,"outData"],[1,1746,141,20,"writeUInt16BE"],[1,1760,141,34,"grayscale"],[1,1762,141,45,"outIndex"],[1,1765,142,16,"outHasAlpha"],[1,1768,143,14,"outData"],[1,1770,143,22,"writeUInt16BE"],[1,1784,143,36,"rgba"],[1,1786,143,41,"alpha"],[1,1792,143,48,"outIndex"],[1,1794,143,59],[1,1798,146,10],[1,1803,147,8],[1,1804,148,8],[1,1812,149,10],[1,1818,149,16],[1,1822,149,20,"Error"],[1,1828,149,26],[1,1855,149,55,"options"],[1,1857,149,63,"colorType"],[1,1868,152,6,"inIndex"],[1,1871,152,17,"inBpp"],[1,1873,153,6,"outIndex"],[1,1876,153,18,"outBpp"],[1,1877,154,4],[1,1878,157,2],[1,1885,157,9,"outData"],[1,1886,158,0],[1,1887,158,2],[1,1890]],"functionMap":{"names":["<global>","module.exports","<anonymous>","getRGBA"],"mappings":"AAA;iBCI;qBCM;KDK;EEoC;GFsD;CDoD"},"hasCjsExports":true},"type":"js/module"}]}