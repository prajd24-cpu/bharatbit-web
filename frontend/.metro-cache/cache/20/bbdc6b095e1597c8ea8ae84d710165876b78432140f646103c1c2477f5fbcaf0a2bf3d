{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":86,"index":86}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":87},"end":{"line":2,"column":69,"index":156}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":157},"end":{"line":3,"column":26,"index":183}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":225},"end":{"line":5,"column":52,"index":277}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"../services/pushNotifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":278},"end":{"line":11,"column":39,"index":447}}],"key":"6td5MWdMBsLZGNw4Rn9RJgT3xXw=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,_d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"AuthProvider\",{enumerable:!0,get:function(){return c}}),Object.defineProperty(_e,\"useAuth\",{enumerable:!0,get:function(){return f}});var t=r(_d[0]),n=e(r(_d[1])),o=e(r(_d[2]));r(_d[3]);var u=(function(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),t.default=e,t})(r(_d[4])),s=(r(_d[5]),r(_d[6]));const d=process.env.EXPO_PUBLIC_BACKEND_URL;u.setNotificationHandler({handleNotification:async()=>({shouldShowAlert:!0,shouldPlaySound:!0,shouldSetBadge:!0})});const l=(0,t.createContext)(void 0),c=({children:e})=>{const[u,c]=(0,t.useState)(null),[f,h]=(0,t.useState)(null),[y,p]=(0,t.useState)(!0),w=(0,t.useRef)(null);(0,t.useEffect)(()=>(_(),()=>{w.current&&w.current()}),[]),(0,t.useEffect)(()=>{(async()=>{0})()},[f]);const _=async()=>{try{const e=await n.default.getItem('auth_token'),t=await n.default.getItem('user_data');e&&t&&(h(e),c(JSON.parse(t)))}catch(e){console.error('Error loading auth:',e)}finally{p(!1)}};return(0,s.jsx)(l.Provider,{value:{user:u,token:f,loading:y,login:async(e,t)=>{try{return(await o.default.post(`${d}/api/auth/login`,{identifier:e,password:t})).data}catch(e){throw new Error(e.response?.data?.detail||'Login failed')}},verify2FA:async(e,t)=>{try{const u=await o.default.post(`${d}/api/auth/verify-2fa`,{mobile:e,otp:t}),{token:s,user:l}=u.data;h(s),c(l),await n.default.setItem('auth_token',s),await n.default.setItem('user_data',JSON.stringify(l))}catch(e){throw new Error(e.response?.data?.detail||'2FA verification failed')}},register:async(e,t,n,u,s,l)=>{try{return(await o.default.post(`${d}/api/auth/register`,{mobile:e,email:t,password:n,referral_code:u,account_type:s||'individual',company_name:l})).data}catch(e){throw new Error(e.response?.data?.detail||'Registration failed')}},verifyOTP:async(e,t,u)=>{try{const s=await o.default.post(`${d}/api/auth/verify-otp`,{mobile:e,otp:t,purpose:u}),{token:l,user:f}=s.data;h(l),c(f),await n.default.setItem('auth_token',l),await n.default.setItem('user_data',JSON.stringify(f))}catch(e){throw new Error(e.response?.data?.detail||'OTP verification failed')}},logout:async()=>{c(null),h(null),await n.default.removeItem('auth_token'),await n.default.removeItem('user_data')},refreshUser:async()=>{if(f)try{const e=await o.default.get(`${d}/api/auth/me`,{headers:{Authorization:`Bearer ${f}`}});c(e.data),await n.default.setItem('user_data',JSON.stringify(e.data))}catch(e){console.error('Error refreshing user:',e)}}},children:e})},f=()=>{const e=(0,t.useContext)(l);if(!e)throw new Error('useAuth must be used within AuthProvider');return e}});","lineCount":1,"map":[[1,144,52,0,"Object"],[1,151,52,0,"defineProperty"],[1,166,52,0,"_e"],[1,169,52,0],[1,185,52,0,"enumerable"],[1,197,52,0],[1,199,52,0,"get"],[1,203,52,0],[1,221,52,0,"AuthProvider"],[1,222,52,0],[1,226,209,0,"Object"],[1,233,209,0,"defineProperty"],[1,248,209,0,"_e"],[1,251,209,0],[1,262,209,0,"enumerable"],[1,274,209,0],[1,276,209,0,"get"],[1,280,209,0],[1,298,209,0,"useAuth"],[1,299,209,0],[1,303,1,0],[1,307,1,0,"_react"],[1,309,1,0,"r"],[1,311,1,0,"_d"],[1,314,1,0],[1,318,2,0,"AsyncStorage"],[1,320,2,0,"_interopDefault"],[1,322,2,0,"r"],[1,324,2,0,"_d"],[1,327,2,0],[1,332,3,0,"axios"],[1,334,3,0,"_interopDefault"],[1,336,3,0,"r"],[1,338,3,0,"_d"],[1,341,3,0],[1,346,3,26,"r"],[1,348,3,26,"_d"],[1,351,3,26],[1,355,5,0],[1,359,5,0,"Notifications"],[1,362],[1,595,5,0,"_interopNamespace"],[1,596,5,0,"r"],[1,598,5,0,"_d"],[1,601,5,0],[1,606,11,39,"_reactJsxRuntime"],[1,609,6,0,"r"],[1,611,6,0,"_d"],[1,614,6,0],[1,618,11,39,"r"],[1,620,11,39,"_d"],[1,623,11,39],[1,628,14,0],[1,634,14,6,"BACKEND_URL"],[1,636,14,20,"process"],[1,644,14,28,"env"],[1,648,14,32,"EXPO_PUBLIC_BACKEND_URL"],[1,672,17,0,"Notifications"],[1,674,17,14,"setNotificationHandler"],[1,697,17,37],[1,698,18,2,"handleNotification"],[1,717,18,22,"async"],[1,727,18,22],[1,728,19,4,"shouldShowAlert"],[1,745,19,21],[1,747,20,4,"shouldPlaySound"],[1,764,20,21],[1,766,21,4,"shouldSetBadge"],[1,782,21,20],[1,788,50,0],[1,794,50,6,"AuthContext"],[1,797,50,20],[1,799,50,20,"createContext"],[1,801,50,33,"createContext"],[1,821,50,63,"undefined"],[1,824,52,13,"AuthProvider"],[1,826,52,69,"AuthProvider"],[1,828,52,72,"children"],[1,843,53,2],[1,849,53,9,"user"],[1,851,53,15,"setUser"],[1,855,53,26],[1,857,53,26,"useState"],[1,859,53,34,"useState"],[1,869,53,48],[1,876,54,9,"token"],[1,878,54,16,"setToken"],[1,882,54,28],[1,884,54,28,"useState"],[1,886,54,36,"useState"],[1,896,54,52],[1,903,55,9,"loading"],[1,905,55,18,"setLoading"],[1,909,55,32],[1,911,55,32,"useState"],[1,913,55,40,"useState"],[1,924,55,41],[1,927,56,8,"notificationListenerCleanup"],[1,930,56,38],[1,932,56,38,"useRef"],[1,934,56,44,"useRef"],[1,942,56,66],[1,949,58,2],[1,951,58,2,"useEffect"],[1,953,58,11,"useEffect"],[1,964,58,12],[1,969,59,4,"loadStoredAuth"],[1,973,75,11],[1,978,76,10,"notificationListenerCleanup"],[1,980,76,38,"current"],[1,989,77,8,"notificationListenerCleanup"],[1,991,77,36,"current"],[1,1003,80,5],[1,1008,83,2],[1,1010,83,2,"useEffect"],[1,1012,83,11,"useEffect"],[1,1023,83,12],[1,1028,84,35,"async"],[1,1039,85,10,"token"],[1,1042,97,4,"setupPushNotifications"],[1,1046,98,5],[1,1047,98,6,"token"],[1,1051,100,2],[1,1057,100,8,"loadStoredAuth"],[1,1059,100,25,"async"],[1,1069,101,4],[1,1073,102,6],[1,1079,102,12,"storedToken"],[1,1087,102,32,"AsyncStorage"],[1,1089,102,44,"default"],[1,1097,102,45,"getItem"],[1,1105,102,53],[1,1119,103,12,"storedUser"],[1,1127,103,31,"AsyncStorage"],[1,1129,103,43,"default"],[1,1137,103,44,"getItem"],[1,1145,103,52],[1,1158,105,10,"storedToken"],[1,1161,105,25,"storedUser"],[1,1165,106,8,"setToken"],[1,1167,106,17,"storedToken"],[1,1170,107,8,"setUser"],[1,1172,107,16,"JSON"],[1,1177,107,21,"parse"],[1,1183,107,27,"storedUser"],[1,1187,109,4],[1,1188,109,6],[1,1194,109,13,"error"],[1,1197,110,6,"console"],[1,1205,110,14,"error"],[1,1211,110,20],[1,1233,110,43,"error"],[1,1235,111,4],[1,1236,111,5],[1,1244,112,6,"setLoading"],[1,1247,112,17],[1,1249,113,4],[1,1252,202,2],[1,1259,203,4],[1,1261,203,4,"_reactJsxRuntime"],[1,1263,203,4,"jsx"],[1,1268,203,5,"AuthContext"],[1,1270,203,17,"Provider"],[1,1279,203,25],[1,1280,203,26,"value"],[1,1286,203,33],[1,1287,203,35,"user"],[1,1294,203,41,"token"],[1,1302,203,48,"loading"],[1,1312,203,57,"login"],[1,1318,151,16,"async"],[1,1324,151,23,"identifier"],[1,1326,151,43,"password"],[1,1331,152,4],[1,1335,157,6],[1,1348,153,29,"axios"],[1,1350,153,34,"default"],[1,1358,153,35,"post"],[1,1363,153,40],[1,1366,153,43,"BACKEND_URL"],[1,1385,153,73],[1,1386,154,8,"identifier"],[1,1399,155,8,"password"],[1,1413,157,22,"data"],[1,1417,158,4],[1,1418,158,6],[1,1424,158,13,"error"],[1,1427,159,6],[1,1433,159,12],[1,1437,159,16,"Error"],[1,1443,159,22,"error"],[1,1445,159,28,"response"],[1,1455,159,38,"data"],[1,1461,159,44,"detail"],[1,1469,159,54],[1,1484,160,4],[1,1487,203,64,"verify2FA"],[1,1497,163,20,"async"],[1,1503,163,27,"mobile"],[1,1505,163,43,"otp"],[1,1510,164,4],[1,1514,165,6],[1,1520,165,12,"response"],[1,1528,165,29,"axios"],[1,1530,165,34,"default"],[1,1538,165,35,"post"],[1,1543,165,40],[1,1546,165,43,"BACKEND_URL"],[1,1570,165,78],[1,1571,166,8,"mobile"],[1,1580,167,8,"otp"],[1,1589,170,14,"token"],[1,1595,170,21,"newToken"],[1,1597,170,31,"user"],[1,1602,170,37,"userData"],[1,1605,170,50,"response"],[1,1607,170,59,"data"],[1,1612,171,6,"setToken"],[1,1614,171,15,"newToken"],[1,1617,172,6,"setUser"],[1,1619,172,14,"userData"],[1,1628,174,12,"AsyncStorage"],[1,1630,174,24,"default"],[1,1638,174,25,"setItem"],[1,1646,174,33],[1,1659,174,47,"newToken"],[1,1668,175,12,"AsyncStorage"],[1,1670,175,24,"default"],[1,1678,175,25,"setItem"],[1,1686,175,33],[1,1698,175,46,"JSON"],[1,1703,175,51,"stringify"],[1,1713,175,61,"userData"],[1,1716,176,4],[1,1717,176,6],[1,1723,176,13,"error"],[1,1726,177,6],[1,1732,177,12],[1,1736,177,16,"Error"],[1,1742,177,22,"error"],[1,1744,177,28,"response"],[1,1754,177,38,"data"],[1,1760,177,44,"detail"],[1,1768,177,54],[1,1794,178,4],[1,1797,203,75,"register"],[1,1806,116,19,"async"],[1,1812,116,26,"mobile"],[1,1814,116,42,"email"],[1,1816,116,57,"password"],[1,1818,116,75,"referralCode"],[1,1820,116,98,"accountType"],[1,1822,116,120,"companyName"],[1,1827,117,4],[1,1831,126,6],[1,1844,118,29,"axios"],[1,1846,118,34,"default"],[1,1854,118,35,"post"],[1,1859,118,40],[1,1862,118,43,"BACKEND_URL"],[1,1884,118,76],[1,1885,119,8,"mobile"],[1,1894,120,8,"email"],[1,1902,121,8,"password"],[1,1913,122,8,"referral_code"],[1,1927,122,23,"referralCode"],[1,1929,123,8,"account_type"],[1,1942,123,22,"accountType"],[1,1945,123,37],[1,1958,124,8,"company_name"],[1,1971,124,22,"companyName"],[1,1976,126,22,"data"],[1,1980,127,4],[1,1981,127,6],[1,1987,127,13,"error"],[1,1990,128,6],[1,1996,128,12],[1,2000,128,16,"Error"],[1,2006,128,22,"error"],[1,2008,128,28,"response"],[1,2018,128,38,"data"],[1,2024,128,44,"detail"],[1,2032,128,54],[1,2054,129,4],[1,2057,203,85,"verifyOTP"],[1,2067,132,20,"async"],[1,2073,132,27,"mobile"],[1,2075,132,43,"otp"],[1,2077,132,56,"purpose"],[1,2082,133,4],[1,2086,134,6],[1,2092,134,12,"response"],[1,2100,134,29,"axios"],[1,2102,134,34,"default"],[1,2110,134,35,"post"],[1,2115,134,40],[1,2118,134,43,"BACKEND_URL"],[1,2142,134,78],[1,2143,135,8,"mobile"],[1,2152,136,8,"otp"],[1,2158,137,8,"purpose"],[1,2171,140,14,"token"],[1,2177,140,21,"newToken"],[1,2179,140,31,"user"],[1,2184,140,37,"userData"],[1,2187,140,50,"response"],[1,2189,140,59,"data"],[1,2194,141,6,"setToken"],[1,2196,141,15,"newToken"],[1,2199,142,6,"setUser"],[1,2201,142,14,"userData"],[1,2210,144,12,"AsyncStorage"],[1,2212,144,24,"default"],[1,2220,144,25,"setItem"],[1,2228,144,33],[1,2241,144,47,"newToken"],[1,2250,145,12,"AsyncStorage"],[1,2252,145,24,"default"],[1,2260,145,25,"setItem"],[1,2268,145,33],[1,2280,145,46,"JSON"],[1,2285,145,51,"stringify"],[1,2295,145,61,"userData"],[1,2298,146,4],[1,2299,146,6],[1,2305,146,13,"error"],[1,2308,147,6],[1,2314,147,12],[1,2318,147,16,"Error"],[1,2324,147,22,"error"],[1,2326,147,28,"response"],[1,2336,147,38,"data"],[1,2342,147,44,"detail"],[1,2350,147,54],[1,2376,148,4],[1,2379,203,96,"logout"],[1,2386,181,17,"async"],[1,2396,182,4,"setUser"],[1,2398,182,12],[1,2404,183,4,"setToken"],[1,2406,183,13],[1,2418,184,10,"AsyncStorage"],[1,2420,184,22,"default"],[1,2428,184,23,"removeItem"],[1,2439,184,34],[1,2459,185,10,"AsyncStorage"],[1,2461,185,22,"default"],[1,2469,185,23,"removeItem"],[1,2480,185,34],[1,2494,203,104,"refreshUser"],[1,2506,188,22,"async"],[1,2516,189,4],[1,2519,189,9,"token"],[1,2521,191,4],[1,2525,192,6],[1,2531,192,12,"response"],[1,2539,192,29,"axios"],[1,2541,192,34,"default"],[1,2549,192,35,"get"],[1,2553,192,39],[1,2556,192,42,"BACKEND_URL"],[1,2572,192,69],[1,2573,193,8,"headers"],[1,2581,193,17],[1,2582,193,19,"Authorization"],[1,2596,193,34],[1,2606,193,44,"token"],[1,2613,195,6,"setUser"],[1,2615,195,14,"response"],[1,2617,195,23,"data"],[1,2629,196,12,"AsyncStorage"],[1,2631,196,24,"default"],[1,2639,196,25,"setItem"],[1,2647,196,33],[1,2659,196,46,"JSON"],[1,2664,196,51,"stringify"],[1,2674,196,61,"response"],[1,2676,196,70,"data"],[1,2682,197,4],[1,2683,197,6],[1,2689,197,13,"error"],[1,2692,198,6,"console"],[1,2700,198,14,"error"],[1,2706,198,20],[1,2731,198,46,"error"],[1,2733,199,4],[1,2737,203,118,"children"],[1,2746,204,7,"children"],[1,2751,209,13,"useAuth"],[1,2753,209,23,"useAuth"],[1,2758,210,2],[1,2764,210,8,"context"],[1,2767,210,18],[1,2769,210,18,"useContext"],[1,2771,210,28,"useContext"],[1,2783,210,29,"AuthContext"],[1,2786,211,2],[1,2790,211,7,"context"],[1,2792,212,4],[1,2798,212,10],[1,2802,212,14,"Error"],[1,2808,212,20],[1,2852,214,2],[1,2859,214,9,"context"],[1,2861,215,2],[1,2864]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","AuthProvider","useEffect$argument_0","addNotificationListeners$argument_0","addNotificationListeners$argument_1","<anonymous>","setupPushNotifications","loadStoredAuth","register","verifyOTP","login","verify2FA","logout","refreshUser","useAuth"],"mappings":"AAA;sBCiB;IDI;qEE8B;YCM;QCM;SDE;QEC;SFI;WGI;KHI;GDC;YCG;mCIC;KJW;GDG;yBME;GNc;mBOE;GPc;oBQE;GRiB;gBSE;GTU;oBUE;GVgB;iBWE;GXK;sBYE;GZY;CFO;uBeE;CfM"},"hasCjsExports":false},"type":"js/module"}]}