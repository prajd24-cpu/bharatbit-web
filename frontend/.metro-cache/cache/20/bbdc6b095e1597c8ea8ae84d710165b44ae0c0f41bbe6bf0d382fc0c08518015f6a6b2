{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":26,"index":175}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"react/jsx-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"3suYSPX9nHbHZ1xNTsKXtKj0atE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";function e(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"AuthProvider\",{enumerable:!0,get:function(){return c}}),Object.defineProperty(_e,\"useAuth\",{enumerable:!0,get:function(){return f}});var t=r(d[0]),o=e(r(d[1])),n=e(r(d[2])),s=r(d[3]);const u=process.env.EXPO_PUBLIC_BACKEND_URL,l=(0,t.createContext)(void 0),c=({children:e})=>{const[c,f]=(0,t.useState)(null),[h,w]=(0,t.useState)(null),[p,y]=(0,t.useState)(!0);(0,t.useEffect)(()=>{_()},[]);const _=async()=>{try{const e=await o.default.getItem('auth_token'),t=await o.default.getItem('user_data');e&&t&&(w(e),f(JSON.parse(t)))}catch(e){console.error('Error loading auth:',e)}finally{y(!1)}};return(0,s.jsx)(l.Provider,{value:{user:c,token:h,loading:p,login:async(e,t)=>{try{return(await n.default.post(`${u}/api/auth/login`,{identifier:e,password:t})).data}catch(e){throw new Error(e.response?.data?.detail||'Login failed')}},verify2FA:async(e,t)=>{try{const s=await n.default.post(`${u}/api/auth/verify-2fa`,{mobile:e,otp:t}),{token:l,user:c}=s.data;w(l),f(c),await o.default.setItem('auth_token',l),await o.default.setItem('user_data',JSON.stringify(c))}catch(e){throw new Error(e.response?.data?.detail||'2FA verification failed')}},register:async(e,t,o,s)=>{try{return(await n.default.post(`${u}/api/auth/register`,{mobile:e,email:t,password:o,referral_code:s})).data}catch(e){throw new Error(e.response?.data?.detail||'Registration failed')}},verifyOTP:async(e,t,s)=>{try{const l=await n.default.post(`${u}/api/auth/verify-otp`,{mobile:e,otp:t,purpose:s}),{token:c,user:h}=l.data;w(c),f(h),await o.default.setItem('auth_token',c),await o.default.setItem('user_data',JSON.stringify(h))}catch(e){throw new Error(e.response?.data?.detail||'OTP verification failed')}},logout:async()=>{f(null),w(null),await o.default.removeItem('auth_token'),await o.default.removeItem('user_data')},refreshUser:async()=>{if(h)try{const e=await n.default.get(`${u}/api/auth/me`,{headers:{Authorization:`Bearer ${h}`}});f(e.data),await o.default.setItem('user_data',JSON.stringify(e.data))}catch(e){console.error('Error refreshing user:',e)}}},children:e})},f=()=>{const e=(0,t.useContext)(l);if(!e)throw new Error('useAuth must be used within AuthProvider');return e}});","lineCount":1,"map":[[1,143,32,0,"Object"],[1,150,32,0,"defineProperty"],[1,165,32,0,"_e"],[1,168,32,0],[1,184,32,0,"enumerable"],[1,196,32,0],[1,198,32,0,"get"],[1,202,32,0],[1,220,32,0,"AuthProvider"],[1,221,32,0],[1,225,148,0,"Object"],[1,232,148,0,"defineProperty"],[1,247,148,0,"_e"],[1,250,148,0],[1,261,148,0,"enumerable"],[1,273,148,0],[1,275,148,0,"get"],[1,279,148,0],[1,297,148,0,"useAuth"],[1,298,148,0],[1,302,1,0],[1,306,1,0,"_react"],[1,308,1,0,"r"],[1,310,1,0,"d"],[1,312,1,0],[1,316,2,0,"AsyncStorage"],[1,318,2,0,"_interopDefault"],[1,320,2,0,"r"],[1,322,2,0,"d"],[1,324,2,0],[1,329,3,0,"axios"],[1,331,3,0,"_interopDefault"],[1,333,3,0,"r"],[1,335,3,0,"d"],[1,337,3,0],[1,342,3,26,"_reactJsxRuntime"],[1,344,3,26,"r"],[1,346,3,26,"d"],[1,348,3,26],[1,352,5,0],[1,358,5,6,"BACKEND_URL"],[1,360,5,20,"process"],[1,368,5,28,"env"],[1,372,5,32,"EXPO_PUBLIC_BACKEND_URL"],[1,396,30,6,"AuthContext"],[1,399,30,20],[1,401,30,20,"createContext"],[1,403,30,33,"createContext"],[1,423,30,63,"undefined"],[1,426,32,13,"AuthProvider"],[1,428,32,69,"AuthProvider"],[1,430,32,72,"children"],[1,445,33,2],[1,451,33,9,"user"],[1,453,33,15,"setUser"],[1,457,33,26],[1,459,33,26,"useState"],[1,461,33,34,"useState"],[1,471,33,48],[1,478,34,9,"token"],[1,480,34,16,"setToken"],[1,484,34,28],[1,486,34,28,"useState"],[1,488,34,36,"useState"],[1,498,34,52],[1,505,35,9,"loading"],[1,507,35,18,"setLoading"],[1,511,35,32],[1,513,35,32,"useState"],[1,515,35,40,"useState"],[1,526,35,41],[1,530,37,2],[1,532,37,2,"useEffect"],[1,534,37,11,"useEffect"],[1,545,37,12],[1,550,38,4,"loadStoredAuth"],[1,555,39,5],[1,559,41,2],[1,565,41,8,"loadStoredAuth"],[1,567,41,25,"async"],[1,577,42,4],[1,581,43,6],[1,587,43,12,"storedToken"],[1,595,43,32,"AsyncStorage"],[1,597,43,44,"default"],[1,605,43,45,"getItem"],[1,613,43,53],[1,627,44,12,"storedUser"],[1,635,44,31,"AsyncStorage"],[1,637,44,43,"default"],[1,645,44,44,"getItem"],[1,653,44,52],[1,666,46,10,"storedToken"],[1,669,46,25,"storedUser"],[1,673,47,8,"setToken"],[1,675,47,17,"storedToken"],[1,678,48,8,"setUser"],[1,680,48,16,"JSON"],[1,685,48,21,"parse"],[1,691,48,27,"storedUser"],[1,695,50,4],[1,696,50,6],[1,702,50,13,"error"],[1,705,51,6,"console"],[1,713,51,14,"error"],[1,719,51,20],[1,741,51,43,"error"],[1,743,52,4],[1,744,52,5],[1,752,53,6,"setLoading"],[1,755,53,17],[1,757,54,4],[1,760,141,2],[1,767,142,4],[1,769,142,4,"_reactJsxRuntime"],[1,771,142,4,"jsx"],[1,776,142,5,"AuthContext"],[1,778,142,17,"Provider"],[1,787,142,25],[1,788,142,26,"value"],[1,794,142,33],[1,795,142,35,"user"],[1,802,142,41,"token"],[1,810,142,48,"loading"],[1,820,142,57,"login"],[1,826,90,16,"async"],[1,832,90,23,"identifier"],[1,834,90,43,"password"],[1,839,91,4],[1,843,96,6],[1,856,92,29,"axios"],[1,858,92,34,"default"],[1,866,92,35,"post"],[1,871,92,40],[1,874,92,43,"BACKEND_URL"],[1,893,92,73],[1,894,93,8,"identifier"],[1,907,94,8,"password"],[1,921,96,22,"data"],[1,925,97,4],[1,926,97,6],[1,932,97,13,"error"],[1,935,98,6],[1,941,98,12],[1,945,98,16,"Error"],[1,951,98,22,"error"],[1,953,98,28,"response"],[1,963,98,38,"data"],[1,969,98,44,"detail"],[1,977,98,54],[1,992,99,4],[1,995,142,64,"verify2FA"],[1,1005,102,20,"async"],[1,1011,102,27,"mobile"],[1,1013,102,43,"otp"],[1,1018,103,4],[1,1022,104,6],[1,1028,104,12,"response"],[1,1036,104,29,"axios"],[1,1038,104,34,"default"],[1,1046,104,35,"post"],[1,1051,104,40],[1,1054,104,43,"BACKEND_URL"],[1,1078,104,78],[1,1079,105,8,"mobile"],[1,1088,106,8,"otp"],[1,1097,109,14,"token"],[1,1103,109,21,"newToken"],[1,1105,109,31,"user"],[1,1110,109,37,"userData"],[1,1113,109,50,"response"],[1,1115,109,59,"data"],[1,1120,110,6,"setToken"],[1,1122,110,15,"newToken"],[1,1125,111,6,"setUser"],[1,1127,111,14,"userData"],[1,1136,113,12,"AsyncStorage"],[1,1138,113,24,"default"],[1,1146,113,25,"setItem"],[1,1154,113,33],[1,1167,113,47,"newToken"],[1,1176,114,12,"AsyncStorage"],[1,1178,114,24,"default"],[1,1186,114,25,"setItem"],[1,1194,114,33],[1,1206,114,46,"JSON"],[1,1211,114,51,"stringify"],[1,1221,114,61,"userData"],[1,1224,115,4],[1,1225,115,6],[1,1231,115,13,"error"],[1,1234,116,6],[1,1240,116,12],[1,1244,116,16,"Error"],[1,1250,116,22,"error"],[1,1252,116,28,"response"],[1,1262,116,38,"data"],[1,1268,116,44,"detail"],[1,1276,116,54],[1,1302,117,4],[1,1305,142,75,"register"],[1,1314,57,19,"async"],[1,1320,57,26,"mobile"],[1,1322,57,42,"email"],[1,1324,57,57,"password"],[1,1326,57,75,"referralCode"],[1,1331,58,4],[1,1335,65,6],[1,1348,59,29,"axios"],[1,1350,59,34,"default"],[1,1358,59,35,"post"],[1,1363,59,40],[1,1366,59,43,"BACKEND_URL"],[1,1388,59,76],[1,1389,60,8,"mobile"],[1,1398,61,8,"email"],[1,1406,62,8,"password"],[1,1417,63,8,"referral_code"],[1,1431,63,23,"referralCode"],[1,1436,65,22,"data"],[1,1440,66,4],[1,1441,66,6],[1,1447,66,13,"error"],[1,1450,67,6],[1,1456,67,12],[1,1460,67,16,"Error"],[1,1466,67,22,"error"],[1,1468,67,28,"response"],[1,1478,67,38,"data"],[1,1484,67,44,"detail"],[1,1492,67,54],[1,1514,68,4],[1,1517,142,85,"verifyOTP"],[1,1527,71,20,"async"],[1,1533,71,27,"mobile"],[1,1535,71,43,"otp"],[1,1537,71,56,"purpose"],[1,1542,72,4],[1,1546,73,6],[1,1552,73,12,"response"],[1,1560,73,29,"axios"],[1,1562,73,34,"default"],[1,1570,73,35,"post"],[1,1575,73,40],[1,1578,73,43,"BACKEND_URL"],[1,1602,73,78],[1,1603,74,8,"mobile"],[1,1612,75,8,"otp"],[1,1618,76,8,"purpose"],[1,1631,79,14,"token"],[1,1637,79,21,"newToken"],[1,1639,79,31,"user"],[1,1644,79,37,"userData"],[1,1647,79,50,"response"],[1,1649,79,59,"data"],[1,1654,80,6,"setToken"],[1,1656,80,15,"newToken"],[1,1659,81,6,"setUser"],[1,1661,81,14,"userData"],[1,1670,83,12,"AsyncStorage"],[1,1672,83,24,"default"],[1,1680,83,25,"setItem"],[1,1688,83,33],[1,1701,83,47,"newToken"],[1,1710,84,12,"AsyncStorage"],[1,1712,84,24,"default"],[1,1720,84,25,"setItem"],[1,1728,84,33],[1,1740,84,46,"JSON"],[1,1745,84,51,"stringify"],[1,1755,84,61,"userData"],[1,1758,85,4],[1,1759,85,6],[1,1765,85,13,"error"],[1,1768,86,6],[1,1774,86,12],[1,1778,86,16,"Error"],[1,1784,86,22,"error"],[1,1786,86,28,"response"],[1,1796,86,38,"data"],[1,1802,86,44,"detail"],[1,1810,86,54],[1,1836,87,4],[1,1839,142,96,"logout"],[1,1846,120,17,"async"],[1,1856,121,4,"setUser"],[1,1858,121,12],[1,1864,122,4,"setToken"],[1,1866,122,13],[1,1878,123,10,"AsyncStorage"],[1,1880,123,22,"default"],[1,1888,123,23,"removeItem"],[1,1899,123,34],[1,1919,124,10,"AsyncStorage"],[1,1921,124,22,"default"],[1,1929,124,23,"removeItem"],[1,1940,124,34],[1,1954,142,104,"refreshUser"],[1,1966,127,22,"async"],[1,1976,128,4],[1,1979,128,9,"token"],[1,1981,130,4],[1,1985,131,6],[1,1991,131,12,"response"],[1,1999,131,29,"axios"],[1,2001,131,34,"default"],[1,2009,131,35,"get"],[1,2013,131,39],[1,2016,131,42,"BACKEND_URL"],[1,2032,131,69],[1,2033,132,8,"headers"],[1,2041,132,17],[1,2042,132,19,"Authorization"],[1,2056,132,34],[1,2066,132,44,"token"],[1,2073,134,6,"setUser"],[1,2075,134,14,"response"],[1,2077,134,23,"data"],[1,2089,135,12,"AsyncStorage"],[1,2091,135,24,"default"],[1,2099,135,25,"setItem"],[1,2107,135,33],[1,2119,135,46,"JSON"],[1,2124,135,51,"stringify"],[1,2134,135,61,"response"],[1,2136,135,70,"data"],[1,2142,136,4],[1,2143,136,6],[1,2149,136,13,"error"],[1,2152,137,6,"console"],[1,2160,137,14,"error"],[1,2166,137,20],[1,2191,137,46,"error"],[1,2193,138,4],[1,2197,142,118,"children"],[1,2206,143,7,"children"],[1,2211,148,13,"useAuth"],[1,2213,148,23,"useAuth"],[1,2218,149,2],[1,2224,149,8,"context"],[1,2227,149,18],[1,2229,149,18,"useContext"],[1,2231,149,28,"useContext"],[1,2243,149,29,"AuthContext"],[1,2246,150,2],[1,2250,150,7,"context"],[1,2252,151,4],[1,2258,151,10],[1,2262,151,14,"Error"],[1,2268,151,20],[1,2312,153,2],[1,2319,153,9,"context"],[1,2321,154,2],[1,2324]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadStoredAuth","register","verifyOTP","login","verify2FA","logout","refreshUser","useAuth"],"mappings":"AAA;qEC+B;YCK;GDE;yBEE;GFc;mBGE;GHY;oBIE;GJiB;gBKE;GLU;oBME;GNgB;iBOE;GPK;sBQE;GRY;CDO;uBUE;CVM"},"hasCjsExports":false},"type":"js/module"}]}